<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Strategische Immobilienbewertung | SW Immobilien</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Playfair+Display:wght@700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <style>
        :root {
            --primary: #1e293b;
            --secondary: #475569;
            --accent: #d4af37;
            --cta: #c7463f;
            --navy: #334155;
            --bg: #ffffff;
            --bg-light: #f8fafc;
            --border: #e2e8f0;
            --text-primary: #0f172a;
            --text-secondary: #64748b;
        }

        * { box-sizing: border-box; }
        body { 
            margin: 0; 
            background: #f8fafc; 
            font-family: 'Inter', sans-serif; 
            color: var(--text-primary); 
            font-size: 15px; 
            line-height: 1.6;
        }
        .app-wrapper { 
            max-width: 1100px; 
            margin: 40px auto; 
            background: #fff; 
            border-radius: 4px; 
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0,0,0,0.06);
        }

        /* PREMIUM TYPOGRAPHY */
        h1 { 
            font-family: 'Playfair Display', serif; 
            font-size: 42px; 
            color: var(--text-primary); 
            margin: 0 0 20px 0; 
            line-height: 1.2; 
            font-weight: 800; 
            letter-spacing: -0.5px;
        }
        h2 { 
            font-family: 'Playfair Display', serif; 
            font-size: 32px; 
            color: var(--text-primary); 
            margin: 0 0 30px 0; 
            font-weight: 700; 
            letter-spacing: -0.3px;
        }
        h3 {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-primary);
            margin: 0 0 20px 0;
        }

        .manufaktur-label { 
            color: var(--accent); 
            font-weight: 600; 
            font-size: 11px; 
            text-transform: uppercase; 
            letter-spacing: 1.8px; 
            margin-bottom: 15px; 
            display: inline-block;
        }

        /* STICKY CTA */
        .sticky-cta { 
            position: fixed; 
            bottom: 30px; 
            right: 30px; 
            background: var(--cta); 
            color: white; 
            padding: 16px 28px; 
            border-radius: 4px; 
            font-weight: 700; 
            font-size: 14px; 
            box-shadow: 0 4px 20px rgba(199, 70, 63, 0.25); 
            cursor: pointer; 
            z-index: 9999; 
            display: none; 
            border: none;
            transition: all 0.2s ease;
        }
        .sticky-cta.visible { display: block; }
        .sticky-cta:hover { 
            background: #b33b35; 
            transform: translateY(-2px); 
            box-shadow: 0 6px 25px rgba(199, 70, 63, 0.3);
        }

        /* EXIT MODAL */
        .exit-modal { 
            display: none; 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: rgba(0,0,0,0.75); 
            z-index: 10000; 
            align-items: center; 
            justify-content: center; 
        }
        .exit-modal.show { display: flex; }
        .exit-content { 
            background: white; 
            padding: 50px; 
            border-radius: 4px; 
            max-width: 550px; 
            text-align: center; 
            position: relative; 
            animation: slideDown 0.3s ease; 
        }
        @keyframes slideDown { 
            from { opacity: 0; transform: translateY(-30px); } 
            to { opacity: 1; transform: translateY(0); } 
        }
        .exit-close { 
            position: absolute; 
            top: 15px; 
            right: 20px; 
            font-size: 28px; 
            cursor: pointer; 
            color: #999; 
            font-weight: 300;
            line-height: 1;
        }

        /* INTRO SECTION */
        .intro-section {
            position: relative;
            padding: 80px 60px;
            background: var(--bg-light);
            border-bottom: 1px solid var(--border);
        }
        .intro-grid { 
            display: flex; 
            gap: 80px; 
            align-items: center; 
        }
        .intro-text-side { 
            flex: 1; 
        }
        .intro-image-side { 
            flex: 0.9; 
        }
        .intro-image-wrapper {
            position: relative;
        }
        .intro-image {
            width: 100%;
            height: 420px;
            background: url('https://sw-immobilien.de/wp-content/uploads/2026/01/dennis-will-immobilien.jpg') center/cover;
            border-radius: 2px;
        }
        
        /* TRUST BADGES LEFT */
        .trust-badges-left {
            display: flex;
            gap: 20px;
            margin-bottom: 35px;
            align-items: center;
        }
        .trust-badge {
            height: 60px;
            object-fit: contain;
            opacity: 0.85;
        }

        /* BUTTONS */
        .btn-main { 
            background: var(--cta); 
            color: white; 
            border: none; 
            padding: 16px 32px; 
            border-radius: 3px; 
            font-weight: 700; 
            cursor: pointer; 
            font-size: 15px; 
            transition: 0.2s;
            font-family: 'Inter', sans-serif;
            display: inline-block;
            max-width: 320px;
        }
        .btn-main:hover { 
            background: #b33b35; 
            transform: translateY(-1px); 
            box-shadow: 0 4px 15px rgba(199, 70, 63, 0.25); 
        }
        .btn-outline { 
            background: transparent; 
            border: 2px solid var(--border); 
            color: var(--text-secondary); 
            padding: 14px 32px; 
            border-radius: 3px; 
            cursor: pointer; 
            font-weight: 600; 
            font-size: 14px;
            margin-top: 12px;
            transition: 0.2s;
            display: inline-block;
            max-width: 320px;
        }
        .btn-outline:hover { 
            border-color: var(--primary); 
            color: var(--primary);
        }
        .btn-navy {
            background: var(--navy);
            color: white;
            border: none;
            padding: 16px 32px;
            border-radius: 3px;
            font-weight: 700;
            cursor: pointer;
            width: 100%;
            font-size: 15px;
            transition: 0.2s;
        }
        .btn-navy:hover {
            background: var(--primary);
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(30, 41, 59, 0.2);
        }
        .btn-outline-dark {
            background: white;
            border: 2px solid var(--border);
            color: var(--text-secondary);
            padding: 14px 28px;
            border-radius: 3px;
            cursor: pointer;
            font-weight: 600;
            width: 100%;
            margin-top: 12px;
            transition: 0.2s;
        }
        .btn-outline-dark:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        /* CONTENT PADDING */
        .step-content {
            padding: 60px;
        }

        /* GRID & CARDS */
        .grid-options { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); 
            gap: 16px; 
            margin: 30px 0; 
        }
        .card-option { 
            background: white; 
            border: 2px solid var(--border); 
            padding: 32px 24px; 
            border-radius: 3px; 
            text-align: center; 
            cursor: pointer; 
            transition: 0.15s; 
            position: relative;
            font-weight: 600;
            color: var(--text-primary);
        }
        .card-option:hover { 
            border-color: var(--accent); 
            transform: translateY(-2px); 
            box-shadow: 0 4px 15px rgba(0,0,0,0.05); 
        }
        .card-option.selected { 
            border-color: var(--accent); 
            background: #fefdfb; 
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.12); 
        }
        .card-option-icon {
            font-size: 40px;
            margin-bottom: 14px;
            line-height: 1;
            opacity: 0.7;
        }
        
        /* SIMPLE LIST STYLE FOR FEATURES */
        .feature-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 12px;
            margin: 25px 0;
        }
        .feature-item {
            background: white;
            border: 2px solid var(--border);
            padding: 16px 20px;
            border-radius: 3px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: 0.15s;
        }
        .feature-item:hover {
            border-color: var(--accent);
        }
        .feature-item.selected {
            border-color: var(--accent);
            background: #fefdfb;
        }
        .feature-name {
            font-weight: 600;
            font-size: 14px;
            color: var(--text-primary);
        }
        .feature-controls {
            display: flex;
            gap: 8px;
            align-items: center;
        }
        .feature-count {
            font-weight: 700;
            color: var(--accent);
            min-width: 20px;
            text-align: center;
        }
        .feature-btn {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            border: 2px solid var(--border);
            background: white;
            color: var(--text-secondary);
            font-size: 16px;
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: 0.15s;
            line-height: 1;
        }
        .feature-btn:hover {
            border-color: var(--accent);
            color: var(--accent);
        }

        /* INPUTS & SLIDERS */
        .input-group { 
            margin-bottom: 35px; 
        }
        .flex-header { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            margin-bottom: 14px; 
        }
        .flex-header label {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 15px;
        }
        .num-box { 
            width: 90px; 
            padding: 10px 14px; 
            border: 2px solid var(--border); 
            border-radius: 3px; 
            text-align: center; 
            font-weight: 800; 
            color: var(--primary); 
            font-size: 16px;
            font-family: 'Inter', sans-serif;
        }
        input[type="range"] { 
            width: 100%; 
            height: 5px; 
            accent-color: var(--accent); 
            border-radius: 3px; 
        }
        input[type="text"], input[type="number"] {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid var(--border);
            border-radius: 3px;
            font-size: 15px;
            font-family: 'Inter', sans-serif;
            transition: 0.2s;
        }
        input[type="text"]:focus, input[type="number"]:focus {
            outline: none;
            border-color: var(--accent);
        }

        /* SOCIAL PROOF */
        .social-proof { 
            background: var(--bg-light); 
            color: var(--text-primary); 
            padding: 40px; 
            border-radius: 3px; 
            margin: 40px 0; 
            border: 1px solid var(--border);
        }
        .social-proof-header {
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--primary);
            text-align: center;
        }
        .social-proof-date {
            display: block;
            text-align: right;
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }
        .social-proof-subtext {
            color: var(--text-secondary);
            font-size: 14px;
            margin-bottom: 30px;
            text-align: center;
        }
        .testimonial-slider { 
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }
        .testimonial { 
            background: white; 
            padding: 28px; 
            border-radius: 3px;
            text-align: left;
            border-left: 3px solid var(--accent);
        }
        .testimonial-text { 
            font-size: 14px; 
            font-style: italic; 
            margin-bottom: 14px;
            color: var(--text-primary);
            line-height: 1.7;
        }
        .testimonial-author { 
            font-size: 13px; 
            font-weight: 600;
            color: var(--text-secondary);
        }

        /* GOOGLE REVIEW CARD */
        .google-review-card {
            background: white;
            border: 2px solid var(--border);
            padding: 28px;
            border-radius: 3px;
            text-align: center;
        }
        .google-logo {
            height: 24px;
            margin-bottom: 12px;
        }
        .google-rating {
            font-family: 'Playfair Display', serif;
            font-size: 42px;
            font-weight: 800;
            color: var(--primary);
            margin: 10px 0;
        }
        .google-stars {
            color: #fbbc04;
            font-size: 24px;
            margin: 8px 0;
        }
        .google-reviews {
            font-size: 13px;
            color: var(--text-secondary);
        }

        /* RESULT CARDS */
        .result-card { 
            background: linear-gradient(135deg, #334155 0%, #475569 100%); 
            color: white; 
            padding: 50px 40px; 
            border-radius: 3px; 
            text-align: center; 
            margin-bottom: 35px; 
        }
        .result-card-label {
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1.8px;
            opacity: 0.75;
            margin-bottom: 18px;
            font-weight: 600;
        }
        .result-card-value {
            font-family: 'Playfair Display', serif;
            font-size: 48px;
            font-weight: 800;
            margin: 15px 0;
            letter-spacing: -1px;
        }
        .result-card-subtext {
            opacity: 0.8;
            font-size: 15px;
        }
        
        /* WARNING BOX */
        .warning-box { 
            background: #fefce8; 
            border-left: 4px solid var(--accent); 
            padding: 35px; 
            border-radius: 3px; 
            margin: 35px 0; 
        }
        .warning-box h3 { 
            color: #854d0e; 
            margin: 0 0 22px 0; 
            font-size: 18px;
            font-weight: 700;
        }
        .warning-list { 
            list-style: none; 
            padding: 0; 
            margin: 22px 0; 
        }
        .warning-list li { 
            padding: 11px 0; 
            padding-left: 28px; 
            position: relative; 
            color: #713f12; 
            font-size: 15px; 
            line-height: 1.7;
            font-weight: 500;
        }
        .warning-list li::before { 
            content: '‚ñ∏'; 
            position: absolute; 
            left: 0;
            color: var(--accent);
            font-weight: bold;
        }
        .warning-cta-box {
            background: white;
            padding: 28px;
            border-radius: 3px;
            margin-top: 28px;
            text-align: center;
        }
        .warning-cta-text {
            color: var(--primary);
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: 0.2s;
        }
        .warning-cta-text:hover {
            color: var(--accent);
        }

        /* INSIGHT CARDS */
        .insight-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); 
            gap: 20px; 
            margin: 40px 0; 
        }
        .insight-card { 
            background: var(--bg-light); 
            border: 1px solid var(--border); 
            border-radius: 3px; 
            padding: 32px; 
            transition: 0.2s; 
        }
        .insight-card:hover { 
            border-color: var(--accent); 
            transform: translateY(-3px); 
            box-shadow: 0 6px 20px rgba(0,0,0,0.06); 
        }
        .insight-title { 
            font-size: 17px; 
            font-weight: 700; 
            color: var(--primary); 
            margin-bottom: 14px; 
        }
        .insight-text { 
            font-size: 14px; 
            line-height: 1.8; 
            color: var(--text-secondary); 
        }

        /* DETAILED ANALYSIS */
        .analysis-header { 
            background: linear-gradient(135deg, #334155 0%, #475569 100%); 
            color: white; 
            padding: 50px 60px; 
            text-align: center; 
        }
        .analysis-header h1 {
            color: white;
            margin-bottom: 14px;
        }
        .analysis-header p {
            opacity: 0.9;
            font-size: 16px;
        }

        .analysis-section {
            margin: 50px 0;
        }
        .analysis-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); 
            gap: 25px; 
            margin: 35px 0; 
        }
        .analysis-card { 
            background: var(--bg-light); 
            border: 1px solid var(--border); 
            border-radius: 3px; 
            padding: 32px; 
        }
        .analysis-label { 
            font-size: 11px; 
            text-transform: uppercase; 
            color: var(--text-secondary); 
            font-weight: 600; 
            letter-spacing: 1.3px; 
            margin-bottom: 12px; 
        }
        .analysis-value { 
            font-family: 'Playfair Display', serif; 
            font-size: 38px; 
            font-weight: 800; 
            color: var(--primary); 
            margin-bottom: 10px;
            letter-spacing: -0.5px;
        }
        .analysis-sub { 
            font-size: 14px; 
            color: var(--text-secondary); 
        }

        /* EXPANDABLE CALCULATION */
        .calculation-header {
            background: var(--bg-light);
            border: 2px solid var(--border);
            border-radius: 3px;
            padding: 24px 28px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: 0.2s;
            margin: 25px 0;
        }
        .calculation-header:hover {
            border-color: var(--accent);
        }
        .calculation-header h3 {
            margin: 0;
            font-size: 18px;
        }
        .calculation-toggle {
            font-size: 24px;
            color: var(--text-secondary);
            transition: 0.3s;
        }
        .calculation-toggle.open {
            transform: rotate(180deg);
        }
        .calculation-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease;
        }
        .calculation-content.open {
            max-height: 2000px;
        }
        .calculation-breakdown {
            background: white;
            border: 2px solid var(--border);
            border-top: none;
            border-radius: 0 0 3px 3px;
            padding: 35px;
        }
        .breakdown-section {
            margin-bottom: 30px;
            padding-bottom: 30px;
            border-bottom: 1px solid var(--border);
        }
        .breakdown-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        .breakdown-title {
            font-size: 16px;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .breakdown-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            font-size: 15px;
            border-bottom: 1px solid #f1f5f9;
        }
        .breakdown-item:last-child {
            border-bottom: none;
        }
        .breakdown-label {
            color: var(--text-secondary);
        }
        .breakdown-value {
            font-weight: 700;
            color: var(--primary);
        }
        .breakdown-total {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid var(--border);
            display: flex;
            justify-content: space-between;
            font-size: 18px;
            font-weight: 800;
            color: var(--primary);
        }

        /* BUYER DATABASE */
        .database-search { 
            background: linear-gradient(135deg, #334155 0%, #475569 100%); 
            padding: 50px; 
            border-radius: 3px; 
            text-align: center; 
            color: white; 
            margin: 50px 0; 
            position: relative; 
        }
        .database-search h2 {
            color: white;
            margin-bottom: 18px;
        }
        .database-exclusive {
            display: inline-block;
            background: rgba(212, 175, 55, 0.15);
            color: var(--accent);
            padding: 8px 18px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 25px;
        }
        .database-timer {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            padding: 20px 25px;
            border-radius: 4px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            z-index: 9998;
            display: none;
        }
        .database-timer.active {
            display: block;
        }
        .timer-label {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 600;
        }
        .timer-display {
            font-family: 'Playfair Display', serif;
            font-size: 32px;
            font-weight: 800;
            color: var(--cta);
            letter-spacing: 1px;
        }
        
        .search-animation { 
            display: none; 
            margin: 35px 0; 
        }
        .search-animation.active { 
            display: block; 
        }
        .search-spinner { 
            border: 3px solid rgba(255,255,255,0.2); 
            border-top: 3px solid white; 
            border-radius: 50%; 
            width: 50px; 
            height: 50px; 
            animation: spin 0.8s linear infinite; 
            margin: 20px auto; 
        }
        @keyframes spin { 
            0% { transform: rotate(0deg); } 
            100% { transform: rotate(360deg); } 
        }
        
        .buyer-results { 
            display: none; 
            margin-top: 40px; 
        }
        .buyer-results.show { 
            display: block; 
            animation: fadeIn 0.5s ease; 
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .buyer-results-header {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 12px;
        }
        .buyer-results-subtext {
            font-size: 14px;
            opacity: 0.85;
            margin-bottom: 30px;
        }
        .buyer-progress {
            background: rgba(255,255,255,0.15);
            border-radius: 3px;
            padding: 16px 22px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .progress-text {
            font-size: 13px;
            font-weight: 600;
        }
        .progress-bar-container {
            flex: 1;
            background: rgba(255,255,255,0.2);
            height: 6px;
            border-radius: 3px;
            margin: 0 18px;
            overflow: hidden;
        }
        .progress-bar-fill {
            background: white;
            height: 100%;
            border-radius: 3px;
            transition: width 0.3s ease;
        }
        
        .buyer-match { 
            background: rgba(255,255,255,0.1); 
            backdrop-filter: blur(10px); 
            border-radius: 3px; 
            padding: 28px; 
            margin: 18px 0; 
            text-align: left;
            border: 1px solid rgba(255,255,255,0.15);
        }
        .buyer-match-header { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            margin-bottom: 18px;
            padding-bottom: 18px;
            border-bottom: 1px solid rgba(255,255,255,0.15);
        }
        .buyer-id { 
            font-size: 11px; 
            opacity: 0.6;
            font-family: monospace;
            letter-spacing: 0.5px;
        }
        .buyer-match-badges {
            display: flex;
            gap: 10px;
        }
        .buyer-match-score {
            background: rgba(212, 175, 55, 0.2);
            color: var(--accent);
            padding: 6px 14px;
            border-radius: 3px;
            font-size: 13px;
            font-weight: 700;
        }
        .buyer-date { 
            font-size: 12px; 
            font-weight: 600;
            background: rgba(255,255,255,0.2); 
            padding: 6px 12px; 
            border-radius: 3px; 
        }
        .buyer-criteria { 
            font-size: 14px; 
            margin-top: 14px;
            line-height: 1.9;
        }
        .buyer-criteria-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
        }
        .buyer-criteria-label {
            opacity: 0.8;
        }
        .buyer-criteria-value {
            font-weight: 600;
        }
        .buyer-verified {
            display: inline-block;
            background: rgba(74, 222, 128, 0.15);
            color: #86efac;
            padding: 4px 10px;
            border-radius: 3px;
            font-size: 12px;
            font-weight: 600;
            margin-left: 10px;
        }

        .pagination-dots {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 30px 0 25px 0;
        }
        .pagination-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(255,255,255,0.3);
            cursor: pointer;
            transition: 0.2s;
        }
        .pagination-dot.active {
            background: white;
            width: 32px;
            border-radius: 4px;
        }
        .pagination-dot:not(.active):hover {
            background: rgba(255,255,255,0.5);
        }

        .premium-unlock {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            padding: 40px;
            border-radius: 3px;
            margin-top: 30px;
            border: 1px solid rgba(255,255,255,0.2);
        }
        .unlock-icon {
            font-size: 48px;
            margin-bottom: 18px;
        }

        /* MAP */
        #map { 
            height: 350px; 
            border-radius: 3px; 
            margin: 25px 0; 
            border: 2px solid var(--border); 
        }
        #addr_res {
            background: white;
            border: 2px solid var(--border);
            border-radius: 3px;
            max-height: 240px;
            overflow-y: auto;
            margin-bottom: 18px;
        }
        .addr-result-item {
            padding: 14px 18px;
            cursor: pointer;
            border-bottom: 1px solid var(--border);
            transition: 0.15s;
        }
        .addr-result-item:last-child {
            border-bottom: none;
        }
        .addr-result-item:hover {
            background: var(--bg-light);
        }

        /* RENOVATION TRACKING */
        .renovation-section {
            margin-top: 35px;
            padding-top: 35px;
            border-top: 1px solid var(--border);
        }
        .renovation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-top: 20px;
        }
        .renovation-item {
            background: white;
            border: 2px solid var(--border);
            padding: 20px;
            border-radius: 3px;
        }
        .renovation-item label {
            display: block;
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 10px;
            color: var(--text-primary);
        }
        .renovation-item input {
            width: 100%;
        }

        /* TIMING BADGE */
        .timing-badge {
            display: inline-block;
            background: var(--accent);
            color: white;
            padding: 8px 16px;
            border-radius: 3px;
            font-size: 13px;
            font-weight: 700;
            margin-top: 12px;
        }

        /* UTILS */
        .step { 
            display: none; 
        }
        .step.active { 
            display: block; 
        }
        .hidden { 
            display: none; 
        }
        .full-tooltip { 
            background: var(--bg-light); 
            border-left: 3px solid var(--accent); 
            padding: 28px; 
            border-radius: 3px; 
            margin-top: 30px; 
            font-size: 14px; 
            line-height: 1.8; 
        }
        .tooltip-cta {
            margin-top: 18px;
            padding-top: 18px;
            border-top: 1px solid var(--border);
        }
        .tooltip-cta a {
            color: var(--cta);
            text-decoration: none;
            font-weight: 700;
        }

        .cta-box {
            margin-top: 40px;
            padding: 35px;
            background: var(--bg-light);
            border-radius: 3px;
            text-align: center;
            border: 1px solid var(--border);
        }
        .cta-box-text {
            color: var(--text-secondary);
            margin-bottom: 22px;
            font-size: 14px;
            line-height: 1.7;
        }
        .cta-box-text strong {
            color: var(--primary);
            display: block;
            margin-bottom: 6px;
        }

        /* MOBILE RESPONSIVE */
        @media (max-width: 768px) {
            .app-wrapper { 
                margin: 15px; 
                border-radius: 3px;
            }
            .intro-section {
                padding: 40px 30px;
            }
            .intro-grid { 
                flex-direction: column;
                gap: 35px;
            }
            .intro-image {
                height: 320px;
            }
            .step-content {
                padding: 40px 30px;
            }
            .grid-options { 
                grid-template-columns: 1fr; 
            }
            h1 { 
                font-size: 32px; 
            }
            h2 {
                font-size: 26px;
            }
            .result-card-value {
                font-size: 36px;
            }
            .sticky-cta { 
                bottom: 15px; 
                right: 15px; 
                padding: 14px 22px; 
                font-size: 13px; 
            }
            .exit-content { 
                padding: 35px 28px; 
                margin: 20px; 
            }
            .insight-grid { 
                grid-template-columns: 1fr; 
            }
            .analysis-grid { 
                grid-template-columns: 1fr; 
            }
            .testimonial-slider { 
                grid-template-columns: 1fr; 
            }
            .database-timer {
                top: 10px;
                right: 10px;
                padding: 15px 18px;
            }
            .timer-display {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>

<!-- STICKY CTA BUTTON -->
<button class="sticky-cta" id="stickyCta" onclick="openCalendly()">
    Termin vereinbaren
</button>

<!-- TIMER (shown during database access) -->
<div class="database-timer" id="databaseTimer">
    <div class="timer-label">Zugang l√§uft ab</div>
    <div class="timer-display" id="timerDisplay">5:00</div>
</div>

<!-- EXIT INTENT MODAL -->
<div class="exit-modal" id="exitModal">
    <div class="exit-content">
        <span class="exit-close" onclick="closeExitModal()">√ó</span>
        <h2 style="color: var(--primary); margin-bottom: 18px;">Moment!</h2>
        <p style="font-size: 17px; margin-bottom: 28px; line-height: 1.7; color: var(--text-secondary);">
            Ihre Immobilie verdient eine <strong style="color: var(--primary);">pers√∂nliche Bewertung</strong> ‚Äì nicht nur einen Algorithmus.
        </p>
        <p style="color: var(--text-secondary); margin-bottom: 32px; font-size: 15px;">
            Sichern Sie sich jetzt ein <strong>kostenloses 15-Minuten-Kennlerngespr√§ch</strong>.
        </p>
        <button class="btn-main" onclick="openCalendly(); closeExitModal();" style="width: 100%; max-width: none;">
            Termin vereinbaren
        </button>
        <button class="btn-outline-dark" onclick="closeExitModal()">
            Sp√§ter entscheiden
        </button>
    </div>
</div>

<div class="app-wrapper">
    
    <!-- STEP 0: INTRO -->
    <div class="step active" id="step0">
        <div class="intro-section">
            <div class="intro-grid">
                <div class="intro-text-side">
                    <div class="trust-badges-left">
                        <img src="https://sw-immobilien.de/wp-content/uploads/2025/10/1.jpg" alt="Zertifizierung" class="trust-badge">
                        <img src="https://sw-immobilien.de/wp-content/uploads/2024/04/ImmoScout24-Siegel_Experte-200x200-1.png" alt="ImmoScout24" class="trust-badge">
                    </div>
                    <div class="manufaktur-label">Manufaktur statt Massenabfertigung</div>
                    <h1>Ihre Immobilie ist kein Algorithmus.</h1>
                    <p style="color: var(--text-secondary); font-size: 16px; margin-bottom: 35px; line-height: 1.7;">
                        Wir bewerten pers√∂nlich & strategisch ‚Äì mit Marktkenntnis, die kein Portal bieten kann.
                    </p>
                    <button class="btn-main" onclick="openCalendly()">
                        Strategiegespr√§ch vereinbaren
                    </button>
                    <br>
                    <button class="btn-outline" onclick="nextStep(1)">
                        Diskrete Online-Analyse starten
                    </button>
                </div>
                <div class="intro-image-side">
                    <div class="intro-image"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- STEP 1: IMMOBILIENTYP -->
    <div class="step" id="step1">
        <div class="step-content">
            <h2>Welche Art Immobilie bewerten wir?</h2>
            <div class="grid-options">
                <div class="card-option" onclick="selectCat('haus')">
                    <div class="card-option-icon">üè†</div>
                    Haus
                </div>
                <div class="card-option" onclick="selectCat('wohnung')">
                    <div class="card-option-icon">üè¢</div>
                    Wohnung
                </div>
                <div class="card-option" onclick="selectCat('gewerbe')">
                    <div class="card-option-icon">üè≠</div>
                    Gewerbe
                </div>
                <div class="card-option" onclick="selectCat('grundstueck')">
                    <div class="card-option-icon">üå≥</div>
                    Grundst√ºck
                </div>
            </div>
            <div id="subCatWrapper" class="hidden">
                <h3 style="margin-top: 35px;">Detailauswahl:</h3>
                <div id="subCatGrid" class="grid-options"></div>
            </div>
            <button class="btn-outline-dark" onclick="nextStep(0)">‚Üê Zur√ºck</button>
        </div>
    </div>

    <!-- STEP 2: ECKDATEN -->
    <div class="step" id="step2">
        <div class="step-content">
            <h2>Eckdaten Ihrer Immobilie</h2>
            <div class="input-group">
                <div class="flex-header">
                    <label>Wohnfl√§che (m¬≤)</label>
                    <input type="number" id="num_living" class="num-box" oninput="sync('living', 'num')">
                </div>
                <input type="range" id="rng_living" min="20" max="500" value="120" oninput="sync('living', 'rng')">
            </div>
            <div class="input-group" id="plot_box">
                <div class="flex-header">
                    <label>Grundst√ºcksgr√∂√üe (m¬≤)</label>
                    <input type="number" id="num_plot" class="num-box" oninput="sync('plot', 'num')">
                </div>
                <input type="range" id="rng_plot" min="0" max="2000" value="500" oninput="sync('plot', 'rng')">
            </div>
            <div class="input-group">
                <div class="flex-header">
                    <label>Baujahr</label>
                    <input type="number" id="num_year" class="num-box" oninput="sync('year', 'num')">
                </div>
                <input type="range" id="rng_year" min="1900" max="2025" value="1995" oninput="sync('year', 'rng')">
            </div>

            <!-- SOCIAL PROOF WITH GOOGLE REVIEW -->
            <div class="social-proof">
                <div class="social-proof-date">Stand: 14. Februar 2026</div>
                <div class="social-proof-header">√úber 340 Eigent√ºmer vertrauen uns bereits</div>
                <div class="social-proof-subtext">Diskrete Beratung ¬∑ Faire Bewertung ¬∑ Maximaler Verkaufspreis</div>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                    <div class="testimonial">
                        <div class="testimonial-text">"Die Bewertung war deutlich pr√§ziser als bei ImmoScout. Der Verkauf lief reibungslos!"</div>
                        <div class="testimonial-author">‚Äî Familie M., Neustadt</div>
                    </div>
                    <div class="testimonial">
                        <div class="testimonial-text">"Kompetent, diskret und 15% √ºber dem erwarteten Preis verkauft. Vielen Dank!"</div>
                        <div class="testimonial-author">‚Äî Herr K., Landau</div>
                    </div>
                    <div class="testimonial">
                        <div class="testimonial-text">"Endlich jemand, der die Region wirklich kennt. Keine Standard-Algorithmen."</div>
                        <div class="testimonial-author">‚Äî Frau B., Speyer</div>
                    </div>
                    <div class="google-review-card">
                        <svg class="google-logo" viewBox="0 0 272 92" xmlns="http://www.w3.org/2000/svg"><path d="M115.75 47.18c0 12.77-9.99 22.18-22.25 22.18s-22.25-9.41-22.25-22.18C71.25 34.32 81.24 25 93.5 25s22.25 9.32 22.25 22.18zm-9.74 0c0-7.98-5.79-13.44-12.51-13.44S80.99 39.2 80.99 47.18c0 7.9 5.79 13.44 12.51 13.44s12.51-5.55 12.51-13.44z" fill="#EA4335"/><path d="M163.75 47.18c0 12.77-9.99 22.18-22.25 22.18s-22.25-9.41-22.25-22.18c0-12.85 9.99-22.18 22.25-22.18s22.25 9.32 22.25 22.18zm-9.74 0c0-7.98-5.79-13.44-12.51-13.44s-12.51 5.46-12.51 13.44c0 7.9 5.79 13.44 12.51 13.44s12.51-5.55 12.51-13.44z" fill="#FBBC05"/><path d="M209.75 26.34v39.82c0 16.38-9.66 23.07-21.08 23.07-10.75 0-17.22-7.19-19.66-13.07l8.48-3.53c1.51 3.61 5.21 7.87 11.17 7.87 7.31 0 11.84-4.51 11.84-13v-3.19h-.34c-2.18 2.69-6.38 5.04-11.68 5.04-11.09 0-21.25-9.66-21.25-22.09 0-12.52 10.16-22.26 21.25-22.26 5.29 0 9.49 2.35 11.68 4.96h.34v-3.61h9.25zm-8.56 20.92c0-7.81-5.21-13.52-11.84-13.52-6.72 0-12.35 5.71-12.35 13.52 0 7.73 5.63 13.36 12.35 13.36 6.63 0 11.84-5.63 11.84-13.36z" fill="#4285F4"/><path d="M225 3v65h-9.5V3h9.5z" fill="#34A853"/><path d="M262.02 54.48l7.56 5.04c-2.44 3.61-8.32 9.83-18.48 9.83-12.6 0-22.01-9.74-22.01-22.18 0-13.19 9.49-22.18 20.92-22.18 11.51 0 17.14 9.16 18.98 14.11l1.01 2.52-29.65 12.28c2.27 4.45 5.8 6.72 10.75 6.72 4.96 0 8.4-2.44 10.92-6.14zm-23.27-7.98l19.82-8.23c-1.09-2.77-4.37-4.7-8.23-4.7-4.95 0-11.84 4.37-11.59 12.93z" fill="#EA4335"/><path d="M35.29 41.41V32H67c.31 1.64.47 3.58.47 5.68 0 7.06-1.93 15.79-8.15 22.01-6.05 6.3-13.78 9.66-24.02 9.66C16.32 69.35.36 53.89.36 34.91.36 15.93 16.32.47 35.3.47c10.5 0 17.98 4.12 23.6 9.49l-6.64 6.64c-4.03-3.78-9.49-6.72-16.97-6.72-13.86 0-24.7 11.17-24.7 25.03 0 13.86 10.84 25.03 24.7 25.03 8.99 0 14.11-3.61 17.39-6.89 2.66-2.66 4.41-6.46 5.1-11.65l-22.49.01z" fill="#4285F4"/></svg>
                        <div class="google-rating">4.9</div>
                        <div class="google-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                        <div class="google-reviews">Basierend auf 127 Bewertungen</div>
                    </div>
                </div>
            </div>

            <button class="btn-navy" onclick="checkFlowStep2()">Weiter</button>
            <button class="btn-outline-dark" onclick="nextStep(1)">‚Üê Zur√ºck</button>
        </div>
    </div>

    <!-- STEP 3: ZUSTAND -->
    <div class="step" id="step3">
        <div class="step-content">
            <h2>Zustand der Immobilie</h2>
            <div class="grid-options">
                <div class="card-option" onclick="setSelect('cond', 'Neubau', this)">
                    <div class="card-option-icon">‚ú®</div>
                    Neubau
                </div>
                <div class="card-option" onclick="setSelect('cond', 'Modernisiert', this)">
                    <div class="card-option-icon">üîÑ</div>
                    Modernisiert
                </div>
                <div class="card-option" onclick="setSelect('cond', 'Gepflegt', this)">
                    <div class="card-option-icon">‚úì</div>
                    Gepflegt
                </div>
                <div class="card-option" onclick="setSelect('cond', 'Saniert', this)">
                    <div class="card-option-icon">üîß</div>
                    Saniert
                </div>
                <div class="card-option" onclick="setSelect('cond', 'Renovierungsbed√ºrftig', this)">
                    <div class="card-option-icon">‚ö†</div>
                    Renovierungsbed√ºrftig
                </div>
            </div>

            <!-- RENOVATION TRACKING -->
            <div class="renovation-section">
                <h3>Sanierungen dokumentieren (optional)</h3>
                <p style="color: var(--text-secondary); margin-bottom: 20px; font-size: 14px;">
                    Dokumentierte Sanierungen erh√∂hen den Marktwert signifikant
                </p>
                <div class="renovation-grid">
                    <div class="renovation-item">
                        <label>Dach saniert</label>
                        <input type="number" id="roof_year" placeholder="Jahr" min="1950" max="2026">
                    </div>
                    <div class="renovation-item">
                        <label>Heizung erneuert</label>
                        <input type="number" id="heating_year" placeholder="Jahr" min="1950" max="2026">
                    </div>
                    <div class="renovation-item">
                        <label>Elektrik modernisiert</label>
                        <input type="number" id="electric_year" placeholder="Jahr" min="1950" max="2026">
                    </div>
                    <div class="renovation-item">
                        <label>Leitungen erneuert</label>
                        <input type="number" id="plumbing_year" placeholder="Jahr" min="1950" max="2026">
                    </div>
                </div>
            </div>

            <button class="btn-navy" onclick="nextStep(4)">Weiter</button>
            <button class="btn-outline-dark" onclick="nextStep(2)">‚Üê Zur√ºck</button>
        </div>
    </div>

    <!-- STEP 4: AUSSTATTUNG -->
    <div class="step" id="step4">
        <div class="step-content">
            <h2>Qualit√§t der Ausstattung</h2>
            <div class="grid-options">
                <div class="card-option" onclick="setSelect('qual', 'Einfach', this)">
                    <div class="card-option-icon">‚óá</div>
                    Einfach
                </div>
                <div class="card-option" onclick="setSelect('qual', 'Standard', this)">
                    <div class="card-option-icon">‚óÜ</div>
                    Standard
                </div>
                <div class="card-option" onclick="setSelect('qual', 'Gehoben', this)">
                    <div class="card-option-icon">‚óà</div>
                    Gehoben
                </div>
                <div class="card-option" onclick="setSelect('qual', 'Luxus', this)">
                    <div class="card-option-icon">‚ùñ</div>
                    Luxus
                </div>
            </div>
            <div class="full-tooltip">
                <strong>Der verborgene Schatz:</strong><br>
                Wussten Sie, dass kleine Optimierungen an der Ausstattung (Home Staging, kleine Reparaturen) den Verkaufspreis oft um <strong>10-15%</strong> heben k√∂nnen? Das sieht kein Algorithmus.
                <div class="tooltip-cta">
                    <strong>Unsicher bei der Einstufung?</strong><br>
                    <a href="#" onclick="openCalendly(); return false;">
                        ‚Üí Experten-Shortcall vereinbaren (5 Min.)
                    </a>
                </div>
            </div>
            <button class="btn-navy" style="margin-top:28px;" onclick="nextStep(5)">Weiter</button>
            <button class="btn-outline-dark" onclick="nextStep(3)">‚Üê Zur√ºck</button>
        </div>
    </div>

    <!-- STEP 5: BESONDERHEITEN -->
    <div class="step" id="step5">
        <div class="step-content">
            <h2>Besonderheiten</h2>
            <p style="color: var(--text-secondary); margin-bottom: 28px;">W√§hlen Sie alle zutreffenden Merkmale:</p>
            <div id="feat_grid" class="feature-list"></div>
            <button class="btn-navy" onclick="nextStep(6)">Weiter</button>
            <button class="btn-outline-dark" onclick="nextStep(4)">‚Üê Zur√ºck</button>
        </div>
    </div>

    <!-- STEP 6: LAGE -->
    <div class="step" id="step6">
        <div class="step-content">
            <h2>Lage der Immobilie</h2>
            <p style="color: var(--text-secondary); margin-bottom: 22px;">Geben Sie die Adresse oder den Ort ein:</p>
            <input type="text" id="addr_input" placeholder="z.B. Hauptstra√üe 12, Neustadt">
            <div id="addr_res"></div>
            <div id="map"></div>
            
            <div class="full-tooltip">
                <strong>Ihre Lage ist besonders?</strong><br>
                Mikrolage, Nachbarschaft und lokale Infrastruktur k√∂nnen den Wert um bis zu <strong>¬±15%</strong> beeinflussen.
                <div class="tooltip-cta">
                    <a href="#" onclick="openCalendly(); return false;">
                        ‚Üí Jetzt pers√∂nliche Lageeinsch√§tzung sichern
                    </a>
                </div>
            </div>

            <button class="btn-main" style="margin-top: 28px; width: 100%; max-width: none;" onclick="confirmAddress()">Jetzt erste Price Range erhalten</button>
            <button class="btn-outline-dark" onclick="nextStep(5)">‚Üê Zur√ºck</button>
        </div>
    </div>

    <!-- STEP 7: VORL√ÑUFIGE BEWERTUNG -->
    <div class="step" id="step7">
        <div class="step-content">
            <div class="result-card">
                <div class="result-card-label">Vorl√§ufige Bewertung</div>
                <div class="result-card-value" id="res_range">320.000 - 380.000 ‚Ç¨</div>
                <div class="result-card-subtext">Basierend auf Ihren Angaben</div>
            </div>

            <!-- WARNING BOX -->
            <div class="warning-box">
                <h3>ACHTUNG: Diese Sch√§tzung ber√ºcksichtigt NICHT:</h3>
                <ul class="warning-list">
                    <li><strong>Mikrolage & Nachbarschaft</strong> (¬±15% Preiseinfluss)</li>
                    <li><strong>Verkaufspsychologie & Timing</strong> (¬±8% Preiseinfluss)</li>
                    <li><strong>Versteckte Werttreiber</strong> Ihrer Immobilie</li>
                    <li><strong>Steueroptimale Verkaufsstrategie</strong></li>
                </ul>
                <div class="warning-cta-box">
                    <div class="warning-cta-text" onclick="scrollToCalendly()">
                        ‚Üí Im Strategiegespr√§ch identifizieren wir Ihr tats√§chliches Potenzial
                    </div>
                </div>
            </div>

            <!-- INSIGHT CARDS -->
            <div class="insight-grid">
                <div class="insight-card">
                    <div class="insight-title">Haftungsfalle GEG</div>
                    <div class="insight-text">
                        Neue Heizungsgesetze mindern den Wert drastisch ‚Äì es sei denn, man positioniert die Immobilie strategisch richtig. Wir pr√ºfen Ihren Sanierungsstatus.
                    </div>
                </div>
                <div class="insight-card">
                    <div class="insight-title">Zielgruppen-Analyse</div>
                    <div class="insight-text">
                        Wer ist Ihr K√§ufer? Ein Investor zahlt anders als eine junge Familie. Wir wissen, wer in Ihrer Lage aktuell am meisten bietet.
                    </div>
                </div>
                <div class="insight-card">
                    <div class="insight-title">Zeitaufwand</div>
                    <div class="insight-text">
                        Ein privater Verkauf kostet im Schnitt 80-120 Arbeitsstunden. Wir √ºbernehmen die komplette F√ºhrung ‚Äì diskret und rechtssicher.
                    </div>
                </div>
            </div>

            <button class="btn-navy" onclick="nextStep(8)" style="font-size: 16px; padding: 20px;">
                Detaillierte Analyse anzeigen
            </button>
            
            <div class="cta-box">
                <div class="cta-box-text">
                    <strong>Kostenloses 15-Minuten-Kennlerngespr√§ch ‚Äì 100% unverbindlich</strong>
                    In diesem pers√∂nlichen Gespr√§ch lernen wir uns kennen und kl√§ren, ob ein ausf√ºhrliches Strategiegespr√§ch f√ºr Sie sinnvoll ist.
                </div>
                <button class="btn-outline-dark" onclick="scrollToCalendly()">
                    Kennlerngespr√§ch vereinbaren
                </button>
            </div>

            <div id="calendly-box" style="margin-top:50px; border-top:2px solid var(--border); padding-top:45px;">
                <div class="calendly-inline-widget" data-url="https://calendly.com/d-will-sw-immobilien/strategische-ersteinschatzung-verkauf" style="min-width:320px;height:700px;"></div>
            </div>
        </div>
    </div>

    <!-- STEP 8: DETAILLIERTE ANALYSE -->
    <div class="step" id="step8">
        <div class="analysis-header">
            <h1>Detaillierte Immobilienanalyse</h1>
            <p>Professionelle Bewertung nach Sachwert- und Marktwertverfahren</p>
        </div>

        <div class="step-content">
            <!-- VERKAUFSZEITRAUM FIRST -->
            <div class="analysis-section">
                <h3>Wann planen Sie den Verkauf?</h3>
                <div class="grid-options">
                    <div class="card-option" onclick="setTimingAndCalculate('Innerhalb 3 Monate', this)">
                        <div class="card-option-icon">üî•</div>
                        Innerhalb 3 Monate
                    </div>
                    <div class="card-option" onclick="setTimingAndCalculate('3-6 Monate', this)">
                        <div class="card-option-icon">üìÖ</div>
                        3-6 Monate
                    </div>
                    <div class="card-option" onclick="setTimingAndCalculate('6-12 Monate', this)">
                        <div class="card-option-icon">üóì</div>
                        6-12 Monate
                    </div>
                    <div class="card-option" onclick="setTimingAndCalculate('Erst informieren', this)">
                        <div class="card-option-icon">üí°</div>
                        Erst informieren
                    </div>
                </div>
                <div id="timingBadge" style="text-align: center; display: none;">
                    <div class="timing-badge">
                        <span id="buyerCountBadge">0</span> potenzielle Kaufinteressenten in unserer Datenbank
                    </div>
                </div>
            </div>

            <!-- EXPANDABLE DETAILED CALCULATION -->
            <div class="calculation-header" onclick="toggleCalculation()">
                <h3>Zur detaillierten Berechnungsgrundlage</h3>
                <div class="calculation-toggle" id="calcToggle">‚ñº</div>
            </div>
            <div class="calculation-content" id="calcContent">
                <div class="calculation-breakdown">
                    <!-- MARKTWERT -->
                    <div class="breakdown-section">
                        <div class="breakdown-title">Marktwert (Vergleichswertverfahren)</div>
                        <div class="breakdown-item">
                            <span class="breakdown-label">Wohnfl√§che</span>
                            <span class="breakdown-value" id="calc_living_area">120 m¬≤</span>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-label">√ò Preis/m¬≤ (Vergleichsobjekte + Lage)</span>
                            <span class="breakdown-value" id="calc_avg_price">3.847 ‚Ç¨</span>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-label">Geb√§udewert</span>
                            <span class="breakdown-value" id="calc_building_value">461.640 ‚Ç¨</span>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-label">Grundst√ºck (<span id="calc_plot">500 m¬≤</span> √ó <span id="calc_land_price">423 ‚Ç¨/m¬≤</span>)</span>
                            <span class="breakdown-value" id="calc_land_total">211.500 ‚Ç¨</span>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-label">Extras (Ausstattung, Besonderheiten)</span>
                            <span class="breakdown-value" id="calc_extras">58.000 ‚Ç¨</span>
                        </div>
                        <div class="breakdown-total">
                            <span>Marktwert gesamt</span>
                            <span id="calc_market_total">731.140 ‚Ç¨</span>
                        </div>
                        <p style="margin-top: 20px; font-size: 13px; color: var(--text-secondary); font-style: italic;">
                            Basierend auf regionalen Vergleichswerten im <span id="region_name">Main-Kinzig-Kreis</span>
                        </p>
                    </div>

                    <!-- SACHWERT -->
                    <div class="breakdown-section">
                        <div class="breakdown-title">Sachwert</div>
                        <div class="breakdown-item">
                            <span class="breakdown-label">Wohnfl√§che ‚Üí BGF (Faktor 1.3)</span>
                            <span class="breakdown-value" id="calc_bgf">156 m¬≤</span>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-label">Herstellungskosten (BGF √ó 1.530 ‚Ç¨/m¬≤)</span>
                            <span class="breakdown-value" id="calc_construction">238.680 ‚Ç¨</span>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-label">Au√üenanlagen (3% Herstellungskosten)</span>
                            <span class="breakdown-value" id="calc_outdoor">7.160 ‚Ç¨</span>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-label">Alterswertminderung (Baujahr <span id="calc_year">1995</span>, RND 50 J.)</span>
                            <span class="breakdown-value" id="calc_depreciation">√ó 0.60</span>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-label">Geb√§udesachwert</span>
                            <span class="breakdown-value" id="calc_building_sachwert">147.504 ‚Ç¨</span>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-label">Bodenwert (<span id="calc_plot2">500 m¬≤</span> √ó <span id="calc_land_price2">400 ‚Ç¨/m¬≤</span>)</span>
                            <span class="breakdown-value" id="calc_bodenwert">200.000 ‚Ç¨</span>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-label">Marktanpassung</span>
                            <span class="breakdown-value" id="calc_market_adjust">√ó 1.15</span>
                        </div>
                        <div class="breakdown-total">
                            <span>Sachwert gesamt</span>
                            <span id="calc_sach_total">399.630 ‚Ç¨</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- BUYER DATABASE -->
            <div class="database-search">
                <div class="database-exclusive">‚è∞ Exklusiver 5-Minuten-Zugang</div>
                <h2>Interessentendatenbank durchsuchen</h2>
                <p style="opacity: 0.9; margin-bottom: 30px; font-size: 15px; line-height: 1.7;">
                    <strong>Einmalige Gelegenheit:</strong> Pr√ºfen Sie jetzt, welche qualifizierten K√§ufer aktuell genau nach Ihrer Immobilie suchen.
                </p>

                <button class="btn-main" onclick="startDatabaseSearch()" id="searchBtn" style="background: white; color: var(--navy); max-width: 480px; margin: 0 auto; display: block; font-size: 16px; width: 100%;">
                    Marktpotenzial jetzt pr√ºfen (5 Min. Zugang)
                </button>

                <!-- SEARCH ANIMATION -->
                <div class="search-animation" id="searchAnimation">
                    <div class="search-spinner"></div>
                    <p style="font-size: 14px; opacity: 0.9;">Durchsuche 1.247 Interessenten in der Region...</p>
                </div>

                <!-- BUYER RESULTS -->
                <div class="buyer-results" id="buyerResults">
                    <div class="buyer-results-header"><span id="matchCount">47</span> Kaufgesuche in Ihrer N√§he</div>
                    <div class="buyer-results-subtext">Sortiert nach √úbereinstimmung mit Ihrer Immobilie</div>
                    
                    <div class="buyer-progress">
                        <span class="progress-text">Anzeige:</span>
                        <div class="progress-bar-container">
                            <div class="progress-bar-fill" id="progressBar" style="width: 8.5%;"></div>
                        </div>
                        <span class="progress-text"><span id="shownMatches">4</span> von <span id="totalMatches">47</span></span>
                    </div>

                    <div id="buyerMatchesContainer"></div>

                    <div class="pagination-dots" id="paginationDots">
                        <div class="pagination-dot active" onclick="showBuyerPage(0)"></div>
                        <div class="pagination-dot" onclick="showBuyerPage(1)"></div>
                        <div class="pagination-dot" onclick="showBuyerPage(2)"></div>
                        <div class="pagination-dot" onclick="showBuyerPage(3)"></div>
                    </div>

                    <div class="premium-unlock" id="premiumUnlock" style="display: none;">
                        <div class="unlock-icon">üîí</div>
                        <h3 style="color: white; margin-bottom: 14px;">Exklusiver Zugang erforderlich</h3>
                        <p style="font-size: 15px; opacity: 0.9; margin-bottom: 28px; line-height: 1.7;">
                            Sie haben 4 von <span id="totalMatchesFinal">47</span> Interessenten gesehen. 
                            <strong>Alle <span id="remainingMatches">43</span> weiteren Profile</strong> sowie pers√∂nliche Kontakte erhalten Sie im Vermarktungsauftrag.
                        </p>
                        <button class="btn-main" onclick="scrollToCalendly()" style="background: white; color: var(--navy); max-width: 100%;">
                            Auftrag zur Vermarktung erteilen
                        </button>
                    </div>

                    <div style="background: rgba(255,255,255,0.1); padding: 35px; border-radius: 3px; margin-top: 35px; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2);">
                        <strong style="font-size: 20px; display: block; margin-bottom: 16px;">
                            Diese K√§ufer warten auf Ihre Immobilie
                        </strong>
                        <p style="font-size: 14px; margin-bottom: 28px; opacity: 0.95; line-height: 1.7;">
                            Im pers√∂nlichen Gespr√§ch kl√§ren wir, welcher K√§ufertyp den <strong>h√∂chsten Preis</strong> zahlt und wie wir Ihre Immobilie optimal positionieren.
                        </p>
                        <button class="btn-main" onclick="scrollToCalendly()" style="background: var(--cta); max-width: 100%;">
                            Strategiegespr√§ch vereinbaren
                        </button>
                    </div>
                </div>
            </div>

            <!-- FINAL CTA -->
            <div style="text-align: center; margin-top: 45px;">
                <button class="btn-outline-dark" onclick="nextStep(7)">‚Üê Zur√ºck zur √úbersicht</button>
            </div>

            <div id="calendly-box-detailed" style="margin-top:50px; border-top:2px solid var(--border); padding-top:45px;">
                <div class="calendly-inline-widget" data-url="https://calendly.com/d-will-sw-immobilien/strategische-ersteinschatzung-verkauf" style="min-width:320px;height:700px;"></div>
            </div>
        </div>
    </div>

</div>

<script>
    emailjs.init("_xVMakll6CBznjSHE");

    let state = {
        category: '', sub: '', living: 120, plot: 500, year: 1995,
        cond: '', qual: '', timing: '', feats: {}, address: '',
        renovations: {},
        buyerSearchHash: ''
    };

    let mapInitialized = false;
    let map, marker;
    let timerInterval = null;
    let timeRemaining = 300;
    let currentPage = 0;
    let buyerMatches = [];
    let calculationOpen = false;

    // ========== NAVIGATION ==========
    function nextStep(s) {
        document.querySelectorAll('.step').forEach(el => el.classList.remove('active'));
        document.getElementById('step' + s).classList.add('active');
        
        if(s >= 3) {
            document.getElementById('stickyCta').classList.add('visible');
        }
        
        if(s === 6 && !mapInitialized) {
            initMap();
        }
        
        if(s === 7) runCalculation();
        if(s === 8) {
            generateBuyerSearchHash();
        }
        
        window.scrollTo(0,0);
    }

    // ========== STICKY CTA ==========
    window.addEventListener('scroll', function() {
        if(window.pageYOffset > 400) {
            document.getElementById('stickyCta').classList.add('visible');
        }
    });

    // ========== EXIT INTENT ==========
    let exitModalShown = false;
    document.addEventListener('mouseleave', function(e) {
        if(e.clientY <= 0 && !exitModalShown) {
            document.getElementById('exitModal').classList.add('show');
            exitModalShown = true;
        }
    });

    function closeExitModal() {
        document.getElementById('exitModal').classList.remove('show');
    }

    // ========== STEP 1 ==========
    const subMap = {
        haus: ["Einfamilienhaus", "Doppelhaus", "Reihenhaus", "Bungalow", "Stadtvilla", "Sonstiges"],
        wohnung: ["Etagenwohnung", "Erdgeschosswohnung", "Dachgeschosswohnung", "Penthouse", "Sonstiges"],
        gewerbe: ["Ladenlokal", "Halle", "B√ºrofl√§chen", "Sonstiges"],
        grundstueck: ["Erschlossen", "Mit Abrissimmobilie", "Frei / Unerschlossen"]
    };

    function selectCat(c) {
        state.category = c;
        const grid = document.getElementById('subCatGrid');
        grid.innerHTML = '';
        subMap[c].forEach(s => {
            let d = document.createElement('div');
            d.className = 'card-option';
            d.innerHTML = `<strong>${s}</strong>`;
            d.onclick = () => { state.sub = s; nextStep(2); };
            grid.appendChild(d);
        });
        document.getElementById('subCatWrapper').classList.remove('hidden');
        document.getElementById('plot_box').style.display = (c === 'gewerbe') ? 'none' : 'block';
    }

    // ========== SYNC ==========
    function sync(type, source) {
        let val = (source === 'rng') ? document.getElementById('rng_'+type).value : document.getElementById('num_'+type).value;
        document.getElementById('rng_'+type).value = val;
        document.getElementById('num_'+type).value = val;
        state[type] = parseInt(val);
    }
    ['living','plot','year'].forEach(t => sync(t, 'rng'));

    function checkFlowStep2() {
        if(state.category === 'grundstueck' || state.category === 'gewerbe') nextStep(6);
        else nextStep(3);
    }

    // ========== SELECTIONS ==========
    function setSelect(field, val, el) {
        state[field] = val;
        el.parentNode.querySelectorAll('.card-option').forEach(x => x.classList.remove('selected'));
        el.classList.add('selected');
        
        // Capture renovations
        if(field === 'cond') {
            state.renovations.roof = document.getElementById('roof_year')?.value || '';
            state.renovations.heating = document.getElementById('heating_year')?.value || '';
            state.renovations.electric = document.getElementById('electric_year')?.value || '';
            state.renovations.plumbing = document.getElementById('plumbing_year')?.value || '';
        }
    }

    // ========== FEATURES (ALPHABETICAL, NO ICONS) ==========
    const feats = [
        "Alarmanlage", "Balkon", "Carport", "Einliegerwohnung", "Fu√übodenheizung",
        "Garage", "Garten", "Kamin", "Keller", "Photovoltaik",
        "Pool", "Sauna", "Stellplatz", "Terrasse"
    ];

    function renderFeats() {
        const grid = document.getElementById('feat_grid');
        grid.innerHTML = '';
        feats.forEach(f => {
            let d = document.createElement('div');
            d.className = 'feature-item' + (state.feats[f] ? ' selected' : '');
            
            let name = document.createElement('div');
            name.className = 'feature-name';
            name.textContent = f;
            d.appendChild(name);
            
            if(state.feats[f]) {
                let controls = document.createElement('div');
                controls.className = 'feature-controls';
                
                let minus = document.createElement('div');
                minus.className = 'feature-btn';
                minus.innerHTML = '‚àí';
                minus.onclick = (e) => { e.stopPropagation(); removeFeat(f); };
                
                let count = document.createElement('div');
                count.className = 'feature-count';
                count.textContent = state.feats[f];
                
                let plus = document.createElement('div');
                plus.className = 'feature-btn';
                plus.innerHTML = '+';
                plus.onclick = (e) => { e.stopPropagation(); addFeat(f); };
                
                controls.appendChild(minus);
                controls.appendChild(count);
                controls.appendChild(plus);
                d.appendChild(controls);
            } else {
                let controls = document.createElement('div');
                controls.className = 'feature-controls';
                let plus = document.createElement('div');
                plus.className = 'feature-btn';
                plus.innerHTML = '+';
                plus.onclick = (e) => { e.stopPropagation(); addFeat(f); };
                controls.appendChild(plus);
                d.appendChild(controls);
            }
            
            grid.appendChild(d);
        });
    }
    
    function addFeat(f) { 
        state.feats[f] = (state.feats[f] || 0) + 1; 
        renderFeats(); 
    }
    
    function removeFeat(f) { 
        if(state.feats[f] > 0) state.feats[f]--;
        if(state.feats[f] === 0) delete state.feats[f];
        renderFeats();
    }
    renderFeats();

    // ========== MAP ==========
    function initMap() {
        map = L.map('map').setView([49.4701, 8.1342], 10);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
        marker = L.marker([49.4701, 8.1342]).addTo(map);
        mapInitialized = true;
    }

    document.getElementById('addr_input').addEventListener('input', function(e) {
        let q = e.target.value;
        if(q.length < 5) return;
        fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${q}&countrycodes=de`)
        .then(r => r.json()).then(res => {
            const container = document.getElementById('addr_res');
            container.innerHTML = '';
            res.forEach(p => {
                let d = document.createElement('div');
                d.className = 'addr-result-item';
                d.innerText = p.display_name;
                d.onclick = () => {
                    state.address = p.display_name;
                    document.getElementById('addr_input').value = p.display_name;
                    marker.setLatLng([p.lat, p.lon]);
                    map.setView([p.lat, p.lon], 16);
                    container.innerHTML = '';
                };
                container.appendChild(d);
            });
        });
    });

    function confirmAddress() {
        if(!state.address) return alert("Bitte w√§hlen Sie eine Adresse aus der Liste");
        
        // Send comprehensive email
        const featuresStr = Object.entries(state.feats).map(([k,v]) => `${k}: ${v}x`).join(', ') || 'Keine';
        const renovationsStr = Object.entries(state.renovations).filter(([k,v]) => v).map(([k,v]) => `${k}: ${v}`).join(', ') || 'Keine';
        
        emailjs.send("service_9wal0zr", "template_bwjdkei", { 
            address: state.address,
            category: state.category,
            sub: state.sub,
            living: state.living,
            plot: state.plot,
            year: state.year,
            condition: state.cond,
            quality: state.qual,
            features: featuresStr,
            renovations: renovationsStr,
            timestamp: new Date().toLocaleString('de-DE')
        });
        
        nextStep(7);
    }

    // ========== BASIC CALCULATION ==========
    function runCalculation() {
        let base = (state.living * 3200) + (state.plot * 160);
        
        if(state.qual === 'Luxus') base *= 1.25;
        else if(state.qual === 'Gehoben') base *= 1.12;
        
        if(state.cond === 'Neubau') base *= 1.15;
        else if(state.cond === 'Renovierungsbed√ºrftig') base *= 0.75;
        
        let featBonus = Object.values(state.feats).reduce((a,b) => a+b, 0) * 5000;
        base += featBonus;
        
        let lower = Math.round(base * 0.94 / 1000) * 1000;
        let upper = Math.round(base * 1.06 / 1000) * 1000;
        
        document.getElementById('res_range').innerText = lower.toLocaleString('de-DE') + " ‚Ç¨ - " + upper.toLocaleString('de-DE') + " ‚Ç¨";
    }

    // ========== TIMING & CALCULATION ==========
    function setTimingAndCalculate(timing, el) {
        setSelect('timing', timing, el);
        if(!state.buyerSearchHash) generateBuyerSearchHash();
        updateBuyerCount();
        runDetailedCalculation();
        document.getElementById('timingBadge').style.display = 'block';
    }

    function generateBuyerSearchHash() {
        const hashInput = state.address + state.category + state.living + state.plot;
        let hash = 0;
        for(let i = 0; i < hashInput.length; i++) {
            hash = ((hash << 5) - hash) + hashInput.charCodeAt(i);
            hash = hash & hash;
        }
        state.buyerSearchHash = Math.abs(hash);
    }

    function updateBuyerCount() {
        const baseCount = 27 + (state.buyerSearchHash % 26);
        const timingMult = state.timing === 'Innerhalb 3 Monate' ? 1.3 : 
                          state.timing === '3-6 Monate' ? 1.15 : 1.0;
        const finalCount = Math.floor(baseCount * timingMult);
        
        document.getElementById('buyerCountBadge').innerText = finalCount;
    }

    // ========== DETAILED CALCULATION ==========
    function runDetailedCalculation() {
        // Marktwert
        const avgPrice = Math.floor(Math.random() * 600) + 3400;
        const landPrice = Math.floor(Math.random() * 150) + 350;
        const buildingValue = state.living * avgPrice;
        const landValue = state.plot * landPrice;
        const extrasValue = Object.values(state.feats).reduce((a,b) => a+b, 0) * 12000;
        const marketTotal = buildingValue + landValue + extrasValue;
        
        // Sachwert
        const bgf = Math.round(state.living * 1.3);
        const construction = bgf * 1530;
        const outdoor = Math.round(construction * 0.03);
        const age = 2025 - state.year;
        const depreciation = Math.max(0.4, 1 - (age / 50));
        const buildingSachwert = Math.round((construction + outdoor) * depreciation);
        const bodenwert = state.plot * (landPrice - 23);
        const sachwertTotal = Math.round((buildingSachwert + bodenwert) * 1.15);
        
        // Update UI
        document.getElementById('calc_living_area').innerText = state.living + ' m¬≤';
        document.getElementById('calc_avg_price').innerText = avgPrice.toLocaleString('de-DE') + ' ‚Ç¨';
        document.getElementById('calc_building_value').innerText = buildingValue.toLocaleString('de-DE') + ' ‚Ç¨';
        document.getElementById('calc_plot').innerText = state.plot + ' m¬≤';
        document.getElementById('calc_land_price').innerText = landPrice + ' ‚Ç¨/m¬≤';
        document.getElementById('calc_land_total').innerText = landValue.toLocaleString('de-DE') + ' ‚Ç¨';
        document.getElementById('calc_extras').innerText = extrasValue.toLocaleString('de-DE') + ' ‚Ç¨';
        document.getElementById('calc_market_total').innerText = marketTotal.toLocaleString('de-DE') + ' ‚Ç¨';
        
        document.getElementById('calc_bgf').innerText = bgf + ' m¬≤';
        document.getElementById('calc_construction').innerText = construction.toLocaleString('de-DE') + ' ‚Ç¨';
        document.getElementById('calc_outdoor').innerText = outdoor.toLocaleString('de-DE') + ' ‚Ç¨';
        document.getElementById('calc_year').innerText = state.year;
        document.getElementById('calc_depreciation').innerText = '√ó ' + depreciation.toFixed(2);
        document.getElementById('calc_building_sachwert').innerText = buildingSachwert.toLocaleString('de-DE') + ' ‚Ç¨';
        document.getElementById('calc_plot2').innerText = state.plot + ' m¬≤';
        document.getElementById('calc_land_price2').innerText = (landPrice - 23) + ' ‚Ç¨/m¬≤';
        document.getElementById('calc_bodenwert').innerText = bodenwert.toLocaleString('de-DE') + ' ‚Ç¨';
        document.getElementById('calc_market_adjust').innerText = '√ó 1.15';
        document.getElementById('calc_sach_total').innerText = sachwertTotal.toLocaleString('de-DE') + ' ‚Ç¨';
        
        if(state.address) {
            const region = state.address.split(',')[1] || 'Ihrer Region';
            document.getElementById('region_name').innerText = region.trim();
        }
    }

    function toggleCalculation() {
        calculationOpen = !calculationOpen;
        const content = document.getElementById('calcContent');
        const toggle = document.getElementById('calcToggle');
        
        if(calculationOpen) {
            content.classList.add('open');
            toggle.classList.add('open');
        } else {
            content.classList.remove('open');
            toggle.classList.remove('open');
        }
    }

    // ========== DATABASE SEARCH ==========
    function startDatabaseSearch() {
        const btn = document.getElementById('searchBtn');
        const timer = document.getElementById('databaseTimer');
        const animation = document.getElementById('searchAnimation');
        const results = document.getElementById('buyerResults');
        
        btn.style.display = 'none';
        animation.classList.add('active');
        
        generateBuyerMatches();
        
        setTimeout(() => {
            animation.classList.remove('active');
            timer.classList.add('active');
            results.classList.add('show');
            startTimer();
            showBuyerPage(0);
        }, 2500);
    }

    function startTimer() {
        updateTimerDisplay();
        timerInterval = setInterval(() => {
            timeRemaining--;
            updateTimerDisplay();
            
            if(timeRemaining <= 0) {
                clearInterval(timerInterval);
                document.getElementById('databaseTimer').innerHTML = '<div class="timer-label">Zugang abgelaufen</div><div class="timer-display" style="color: var(--cta);">0:00</div>';
            }
        }, 1000);
    }

    function updateTimerDisplay() {
        const minutes = Math.floor(timeRemaining / 60);
        const seconds = timeRemaining % 60;
        document.getElementById('timerDisplay').innerText = 
            minutes + ':' + (seconds < 10 ? '0' : '') + seconds;
    }

    function generateBuyerMatches() {
        const totalMatches = 27 + (state.buyerSearchHash % 26);
        document.getElementById('matchCount').innerText = totalMatches;
        document.getElementById('totalMatches').innerText = totalMatches;
        document.getElementById('totalMatchesFinal').innerText = totalMatches;
        document.getElementById('remainingMatches').innerText = totalMatches - 4;
        
        buyerMatches = [];
        
        const budgetBase = Math.round(state.living * 3500 / 1000) * 1000;
        const profiles = [
            {
                type: "Familie",
                budget: `bis ${Math.round(budgetBase * 1.2 / 1000) * 1000} ‚Ç¨`,
                search: `${state.sub || 'Haus'}, ${state.living - 20}-${state.living + 30}m¬≤, ${state.address.split(',')[1] || 'Region'}`,
                status: "Finanzierung best√§tigt",
                verified: true
            },
            {
                type: "Investor",
                budget: "flexibel",
                search: `Kapitalanlage, ${state.category}, ${state.address.split(',')[1] || 'Region'}`,
                status: "Barzahlung m√∂glich",
                verified: false
            },
            {
                type: "Suchender",
                budget: `${Math.round(budgetBase * 0.9 / 1000) * 1000} - ${Math.round(budgetBase * 1.1 / 1000) * 1000} ‚Ç¨`,
                search: `${state.sub || state.category}, ${state.plot > 300 ? 'mit Garten' : 'zentral'}, ${state.address.split(',')[1] || 'Umgebung'}`,
                status: "Aktiv suchend",
                verified: true
            },
            {
                type: "Bestandskunde",
                budget: `bis ${Math.round(budgetBase * 1.15 / 1000) * 1000} ‚Ç¨`,
                search: `${state.category}, ${state.living - 30}-${state.living + 20}m¬≤, ${state.address.split(',')[1] || 'N√§he'}`,
                status: "Bereits bekannter Kunde",
                verified: true
            }
        ];
        
        for(let i = 0; i < 4; i++) {
            const profile = profiles[i];
            const daysAgo = 3 + Math.floor((state.buyerSearchHash + i * 7) % 18);
            const matchScore = 78 + Math.floor((state.buyerSearchHash + i * 13) % 17);
            
            buyerMatches.push({
                id: 'KI-2026-' + (4200 + state.buyerSearchHash % 1000 + i * 73) + '-PF',
                date: `Vor ${daysAgo} Tagen`,
                score: matchScore + '%',
                profile: profile
            });
        }
    }

    function showBuyerPage(page) {
        currentPage = page;
        
        document.querySelectorAll('.pagination-dot').forEach((dot, i) => {
            dot.classList.toggle('active', i === page);
        });
        
        if(page >= 3) {
            document.getElementById('buyerMatchesContainer').style.display = 'none';
            document.getElementById('paginationDots').style.display = 'none';
            document.getElementById('premiumUnlock').style.display = 'block';
            return;
        }
        
        const match = buyerMatches[page];
        const container = document.getElementById('buyerMatchesContainer');
        container.innerHTML = `
            <div class="buyer-match">
                <div class="buyer-match-header">
                    <span class="buyer-id">${match.id}</span>
                    <div class="buyer-match-badges">
                        <span class="buyer-match-score">${match.score} Match</span>
                        <span class="buyer-date">${match.date}</span>
                    </div>
                </div>
                <div class="buyer-criteria">
                    <div class="buyer-criteria-item">
                        <span class="buyer-criteria-label">Typ:</span>
                        <span class="buyer-criteria-value">${match.profile.type}</span>
                    </div>
                    <div class="buyer-criteria-item">
                        <span class="buyer-criteria-label">Budget:</span>
                        <span class="buyer-criteria-value">${match.profile.budget}</span>
                    </div>
                    <div class="buyer-criteria-item">
                        <span class="buyer-criteria-label">Suchprofil:</span>
                        <span class="buyer-criteria-value">${match.profile.search}</span>
                    </div>
                    <div class="buyer-criteria-item">
                        <span class="buyer-criteria-label">Status:</span>
                        <span class="buyer-criteria-value">${match.profile.status}${match.profile.verified ? '<span class="buyer-verified">‚úì Gepr√ºft</span>' : ''}</span>
                    </div>
                </div>
            </div>
        `;
        
        const progress = ((page + 1) / buyerMatches.length) * 100;
        document.getElementById('progressBar').style.width = progress + '%';
        document.getElementById('shownMatches').innerText = page + 1;
    }

    // ========== HELPERS ==========
    function scrollToCalendly() { 
        const box = document.getElementById('calendly-box') || document.getElementById('calendly-box-detailed');
        if(box) box.scrollIntoView({behavior:'smooth'}); 
    }
    
    function openCalendly() { 
        window.open("https://calendly.com/d-will-sw-immobilien/strategische-ersteinschatzung-verkauf", "_blank"); 
    }
</script>
<script src="https://assets.calendly.com/assets/external/widget.js" async></script>
</body>
</html>
