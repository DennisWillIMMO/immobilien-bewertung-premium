<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Strategische Immobilienbewertung | SW Immobilien</title>
    
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <style>
        :root {
            --primary: #0e3a67;
            --accent: #c7a44c;
            --cta: #d9534f;
            --bg: #ffffff;
            --card-bg: #f8f9fa;
            --border: #e2e8f0;
        }

        body {
            margin: 0;
            background: var(--bg);
            font-family: 'DM Sans', sans-serif;
            color: #1a1a1a;
            font-size: 14px;
        }

        /* COMPACT WIDGET LAYOUT */
        .app-wrapper {
            max-width: 850px;
            margin: 0 auto;
            padding: 15px;
        }

        .intro-grid {
            display: flex;
            gap: 20px;
            align-items: center;
            background: #fff;
            padding: 20px;
            border-radius: 15px;
        }

        .intro-image-box {
            flex: 0 0 180px;
            height: 180px;
            background: url('https://sw-immobilien.de/wp-content/uploads/2026/01/dennis-will-immobilien.jpg') center/cover;
            border-radius: 15px;
        }

        h1 { font-size: 24px; color: var(--primary); margin: 0 0 10px 0; line-height: 1.2; }
        h2 { font-size: 20px; color: var(--primary); margin-bottom: 15px; }

        /* BUTTONS */
        .btn-main {
            background: var(--cta); color: white; border: none;
            padding: 12px 20px; border-radius: 8px; font-weight: 700;
            cursor: pointer; width: 100%; transition: 0.2s;
        }
        .btn-outline {
            background: white; border: 1px solid var(--primary); color: var(--primary);
            padding: 10px 15px; border-radius: 8px; cursor: pointer; font-weight: 600;
        }

        /* GRID OPTIONS */
        .grid-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 12px;
            margin-bottom: 20px;
        }

        .card-option {
            background: var(--card-bg);
            border: 1px solid var(--border);
            padding: 15px 10px;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: 0.2s;
        }
        .card-option.selected { border: 2px solid var(--primary); background: #f0f5fb; }
        .icon-svg { width: 32px; height: 32px; fill: var(--primary); margin-bottom: 8px; }

        /* FULL WIDTH TOOLTIP */
        .full-tooltip {
            background: #fff8f0;
            border-left: 4px solid var(--accent);
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            width: 100%;
            box-sizing: border-box;
            font-size: 13px;
        }

        #map { height: 250px; border-radius: 12px; margin: 15px 0; }
        .hidden { display: none; }
        .step { display: none; animation: fadeIn 0.4s; }
        .step.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        @media (max-width: 600px) {
            .intro-grid { flex-direction: column; text-align: center; }
            .intro-image-box { flex: 0 0 120px; width: 120px; height: 120px; }
        }
    </style>
</head>
<body>

<div class="app-wrapper">
    
    <div class="step active" id="step0">
        <div class="intro-grid">
            <div class="intro-image-box"></div>
            <div style="flex: 1;">
                <div style="color: #4bbfad; font-weight: 700; font-size: 12px; letter-spacing: 1px;">MANUFAKTUR STATT MASSENABFERTIGUNG</div>
                <h1>Ihre Immobilie ist kein Algorithmus.</h1>
                <p style="color: #666; margin-bottom: 20px;">Wir bewerten persönlich & strategisch für die Pfalz.</p>
                <button class="btn-main" onclick="openCalendly()" style="margin-bottom: 10px;">Strategiegespräch vereinbaren</button>
                <a href="javascript:void(0)" onclick="nextStep(1)" style="color: var(--primary); font-weight: 700; text-decoration: none; font-size: 13px;">Online-Analyse starten ›</a>
            </div>
        </div>
        <div style="margin-top: 20px; text-align: center; opacity: 0.7;">
            <img src="https://sw-immobilien.de/wp-content/uploads/2025/10/1.jpg" height="40" style="margin: 0 10px;">
            <img src="https://sw-immobilien.de/wp-content/uploads/2024/04/ImmoScout24-Siegel_Experte-200x200-1.png" height="40" style="margin: 0 10px;">
        </div>
    </div>

    <div class="step" id="step1">
        <h2>Welche Art Immobilie?</h2>
        <div class="grid-options">
            <div class="card-option" onclick="selectCat('haus')">
                <svg class="icon-svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
                <div>Haus</div>
            </div>
            <div class="card-option" onclick="selectCat('wohnung')">
                <svg class="icon-svg" viewBox="0 0 24 24"><path d="M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2z"/></svg>
                <div>Wohnung</div>
            </div>
            <div class="card-option" onclick="selectCat('gewerbe')">
                <svg class="icon-svg" viewBox="0 0 24 24"><path d="M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2z"/></svg>
                <div>Gewerbe</div>
            </div>
            <div class="card-option" onclick="selectCat('grundstueck')">
                <svg class="icon-svg" viewBox="0 0 24 24"><path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89"/></svg>
                <div>Grundstück</div>
            </div>
        </div>
        <div id="subCatWrapper" class="hidden">
            <div id="subCatGrid" class="grid-options"></div>
        </div>
        <button class="btn-outline" onclick="prevStep()">Zurück</button>
    </div>

    <div class="step" id="step4">
        <h2>Qualität der Ausstattung</h2>
        <div class="grid-options">
            <div class="card-option" onclick="setQuality('Einfach', this)">Einfach</div>
            <div class="card-option" onclick="setQuality('Standard', this)">Standard</div>
            <div class="card-option" onclick="setQuality('Gehoben', this)">Gehoben</div>
            <div class="card-option" onclick="setQuality('Luxus', this)">Luxus</div>
        </div>
        
        <div class="full-tooltip">
            <strong>✨ Der verborgene Schatz:</strong><br>
            Wussten Sie, dass kleine Optimierungen an der Ausstattung den Verkaufspreis oft um <strong>10-15%</strong> heben können? Das sieht kein Algorithmus.
        </div>

        <div style="margin-top: 20px; display: flex; gap: 10px;">
            <button class="btn-main" onclick="nextStep(5)">Weiter</button>
            <button class="btn-outline" onclick="prevStep()">Zurück</button>
        </div>
    </div>

    <div class="step" id="step2"><h2>Eckdaten...</h2><button onclick="nextStep(4)">Weiter</button></div>
    <div class="step" id="step3"><h2>Zustand...</h2><button onclick="nextStep(4)">Weiter</button></div>
    <div class="step" id="step5"><h2>Besonderheiten...</h2><button onclick="nextStep(6)">Weiter</button></div>
    <div class="step" id="step6"><h2>Adresse...</h2><button onclick="nextStep(7)">Ergebnis</button></div>
    <div class="step" id="step7"><h2>Ergebnis...</h2></div>

</div>

<script>
    (function(){ emailjs.init("_xVMakll6CBznjSHE"); })();

    function nextStep(s) {
        const nextEl = document.getElementById('step' + s);
        if(!nextEl) {
            console.error("Fehler: Schritt 'step" + s + "' nicht im DOM gefunden.");
            return;
        }
        document.querySelectorAll('.step').forEach(el => el.classList.remove('active'));
        nextEl.classList.add('active');
        window.scrollTo(0,0);
    }

    function prevStep() { /* Logik wie bisher */ }
    function openCalendly() { window.open("https://calendly.com/d-will-sw-immobilien/strategische-ersteinschatzung-verkauf", "_blank"); }

    const subCats = {
        haus: ["Einfamilienhaus", "Doppelhaus", "Reihenhaus", "Bungalow", "Stadtvilla"],
        wohnung: ["Etagenwohnung", "DG-Wohnung", "Penthouse"],
        gewerbe: ["Büro", "Halle", "Laden"],
        grundstueck: ["Erschlossen", "Unerschlossen"]
    };

    function selectCat(cat) {
        const grid = document.getElementById('subCatGrid');
        grid.innerHTML = '';
        subCats[cat].forEach(s => {
            let div = document.createElement('div');
            div.className = 'card-option';
            div.innerText = s;
            div.onclick = () => nextStep(4); // Hier ggf. zu Schritt 2 springen
            grid.appendChild(div);
        });
        document.getElementById('subCatWrapper').classList.remove('hidden');
    }

    function setQuality(q, el) {
        document.querySelectorAll('#step4 .card-option').forEach(c => c.classList.remove('selected'));
        el.classList.add('selected');
    }
</script>
</body>
</html>